{"pageProps":{"post":{"_createdAt":"2022-05-07T15:14:50Z","_id":"3f4f32a8-e381-46ca-a896-93d58f43e6d5","_updatedAt":"2022-05-12T16:23:51Z","author":{"_id":"4dd05bba-46ae-44bd-a5b5-c5f46c6c1de2","name":"Don Joe","slug":"don-joe"},"body":[{"_key":"59520e19657b","_type":"block","children":[{"_key":"0758573878d0","_type":"span","marks":[],"text":"Heading 1"}],"markDefs":[],"style":"h1"},{"_key":"78c302b64e2d","_type":"block","children":[{"_key":"6f0da791130b","_type":"span","marks":[],"text":"Heading 2"}],"markDefs":[],"style":"h2"},{"_key":"7a46014ea0e2","_type":"block","children":[{"_key":"a58e4b9f54e0","_type":"span","marks":[],"text":"Heading 3"}],"markDefs":[],"style":"h3"},{"_key":"acccd7b559ec","_type":"block","children":[{"_key":"0365b50d3a3a","_type":"span","marks":[],"text":"Heading 4"}],"markDefs":[],"style":"h4"},{"_key":"a72f03405919","_type":"block","children":[{"_key":"8d6b08555ddc","_type":"span","marks":[],"text":"Normal"}],"markDefs":[],"style":"normal"},{"_key":"f53c08886b25","_type":"block","children":[{"_key":"1fc2977877b9","_type":"span","marks":[],"text":"Blog main text with "},{"_key":"5b2dab02d072","_type":"span","marks":["strong"],"text":"bold"},{"_key":"64fb7f50bc87","_type":"span","marks":[],"text":" text and "},{"_key":"ba2a8aecb3dd","_type":"span","marks":["em"],"text":"italic"},{"_key":"2d35a2b33105","_type":"span","marks":[],"text":" text."}],"markDefs":[],"style":"normal"},{"_key":"bf4be2d86e45","_type":"block","children":[{"_key":"002c225ea9f1","_type":"span","marks":[],"text":"List Item 1"}],"level":1,"listItem":"bullet","markDefs":[],"style":"normal"},{"_key":"56b672e19fd2","_type":"block","children":[{"_key":"2862ae0a8ac4","_type":"span","marks":[],"text":"List Item 2"}],"level":1,"listItem":"bullet","markDefs":[],"style":"normal"},{"_key":"5a055a129ec0","_type":"block","children":[{"_key":"f7c4b266623a","_type":"span","marks":[],"text":"3 out of 4 Australians make up 75% of its population."}],"markDefs":[],"style":"blockquote"},{"_key":"2244d89d7c94","_type":"block","children":[{"_key":"eff762d94638","_type":"span","marks":[],"text":""}],"markDefs":[],"style":"normal"},{"_key":"ee33ef69027e","_type":"image","alt":"Random Interior","asset":{"_ref":"image-772d215b215b10e2a4916c8bc39a0413a446e3f4-1440x810-jpg","_type":"reference"}},{"_key":"dc57777e5d89","_type":"block","children":[{"_key":"37c8af6fc45d","_type":"span","marks":[],"text":"Photo by "},{"_key":"ecba5404045e","_type":"span","marks":["fcdd830ff2dc"],"text":"Rachit Thakker"}],"markDefs":[{"_key":"fcdd830ff2dc","_type":"link","blank":true,"href":"https://www.artstation.com/artwork/R1LEe"}],"style":"normal"},{"_key":"3ddc54c1117d","_type":"block","children":[{"_key":"210b114b910f","_type":"span","marks":[],"text":""}],"markDefs":[],"style":"normal"},{"_key":"9e01b8c54c25","_type":"code","code":"import os, time, logging\nfrom PIL import Image\nfrom pytesseract import pytesseract\n\n# Create and configure logger\nlogging.basicConfig(filename=\"/home/pi/Pictures/RPi_Screenshots/RPi_Screenshots_Text/screenshot_error.log\",\n                    format='%(asctime)s %(message)s')\n\n# Creating an object\nlogger = logging.getLogger()\n\n# Setting the threshold of logger to DEBUG\nlogger.setLevel(logging.DEBUG)\n\nlogger.debug(\"PID: %s\", str(os.getpid()))\n\ndef readScreenshot():\n    folder_path = \"/home/pi/Pictures/RPi_Screenshots\"\n    list_dir = os.listdir(folder_path)\n    completed = \"/home/pi/Pictures/RPi_Screenshots/RPi_Screenshots_Text/completed_screenshots.txt\"\n\n    readComp = open(completed)\n    listOfCompletedImgs = []\n    for line in readComp:\n        line = line.strip()\n        listOfCompletedImgs.append(line)\n\n    remains = []\n    for i in list_dir:\n        if not i.endswith(\".png\"):\n            continue\n        if i not in listOfCompletedImgs:\n            remains.append(i)\n\n    for i in remains:\n        img = Image.open(\"/home/pi/Pictures/RPi_Screenshots/\"+i)\n        \n        try:\n            text = pytesseract.image_to_string(img)\n        except Exception as e:\n            logger.error(\"\\n\\nError for file:\\n\" + i + '\\n', exc_info=e)\n            print(\"Error for file: \" + i + '\\n')\n            continue\n\n        if (len(text) < 1):\n            filewrite = open(\"/home/pi/Pictures/RPi_Screenshots/RPi_Screenshots_Text/empty_screenshots.txt\", 'a')\n            filewrite.write(i + '\\n')\n            filewrite.close()\n            continue\n        \n        filewrite = open(\"/home/pi/Pictures/RPi_Screenshots/RPi_Screenshots_Text/\" + i[:-4] + \".txt\", 'w')\n        filewrite.write(text)\n        filewrite.close()\n\n        filewrite = open(\"/home/pi/Pictures/RPi_Screenshots/RPi_Screenshots_Text/completed_screenshots.txt\", 'a')\n        filewrite.write(i + '\\n')\n        filewrite.close()\n\nwhile True:\n    readScreenshot()\n    time.sleep(10)","language":"python"},{"_key":"3231912885dd","_type":"block","children":[{"_key":"bab736658438","_type":"span","marks":[],"text":""}],"markDefs":[],"style":"normal"},{"_key":"182b3e8a5eab","_type":"block","children":[{"_key":"dd5351bf1581","_type":"span","marks":[],"text":"Ending text."}],"markDefs":[],"style":"normal"}],"categories":[],"mainImage":null,"related":[],"slug":"demo-blog-post-1","title":"Demo Blog Post 1"}},"__N_SSG":true}